 Network rinha-nginx-2024q1  Creating
 Network rinha-nginx-2024q1  Created
 Container victorverdoodt-db-1  Creating
 Container victorverdoodt-db-1  Created
 Container victorverdoodt-rinhadebackend-1  Creating
 Container victorverdoodt-rinhadebackend-1  Created
 Container victorverdoodt-rinhadebackend02-1  Creating
 Container victorverdoodt-rinhadebackend02-1  Created
 Container victorverdoodt-nginx-1  Creating
 Container victorverdoodt-nginx-1  Created
Attaching to db-1, nginx-1, rinhadebackend-1, rinhadebackend02-1
db-1                | The files belonging to this database system will be owned by user "postgres".
db-1                | This user must also own the server process.
db-1                | 
db-1                | The database cluster will be initialized with locale "en_US.utf8".
db-1                | The default database encoding has accordingly been set to "UTF8".
db-1                | The default text search configuration will be set to "english".
db-1                | 
db-1                | Data page checksums are disabled.
db-1                | 
db-1                | fixing permissions on existing directory /var/lib/postgresql/data ... ok
db-1                | creating subdirectories ... ok
db-1                | selecting dynamic shared memory implementation ... posix
db-1                | selecting default max_connections ... 100
db-1                | selecting default shared_buffers ... 128MB
db-1                | selecting default time zone ... Etc/UTC
db-1                | creating configuration files ... ok
db-1                | running bootstrap script ... ok
db-1                | performing post-bootstrap initialization ... ok
db-1                | initdb: warning: enabling "trust" authentication for local connections
db-1                | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
db-1                | syncing data to disk ... ok
db-1                | 
db-1                | 
db-1                | Success. You can now start the database server using:
db-1                | 
db-1                |     pg_ctl -D /var/lib/postgresql/data -l logfile start
db-1                | 
db-1                | waiting for server to start....2024-02-19 17:28:40.070 UTC [49] LOG:  starting PostgreSQL 16.2 (Debian 16.2-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
db-1                | 2024-02-19 17:28:40.070 UTC [49] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
db-1                | 2024-02-19 17:28:40.072 UTC [52] LOG:  database system was shut down at 2024-02-19 17:28:38 UTC
db-1                | 2024-02-19 17:28:40.075 UTC [49] LOG:  database system is ready to accept connections
db-1                |  done
db-1                | server started
db-1                | CREATE DATABASE
db-1                | 
db-1                | 
db-1                | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
db-1                | 
db-1                | waiting for server to shut down...2024-02-19 17:28:40.241 UTC [49] LOG:  received fast shutdown request
db-1                | .2024-02-19 17:28:40.241 UTC [49] LOG:  aborting any active transactions
db-1                | 2024-02-19 17:28:40.243 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
db-1                | 2024-02-19 17:28:40.245 UTC [50] LOG:  shutting down
db-1                | 2024-02-19 17:28:40.245 UTC [50] LOG:  checkpoint starting: shutdown immediate
db-1                | 2024-02-19 17:28:40.250 UTC [50] LOG:  checkpoint complete: wrote 923 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.006 s, sync=0.001 s, total=0.006 s; sync files=0, longest=0.000 s, average=0.000 s; distance=4256 kB, estimate=4256 kB; lsn=0/1912D20, redo lsn=0/1912D20
db-1                | 2024-02-19 17:28:40.260 UTC [49] LOG:  database system is shut down
db-1                |  done
db-1                | server stopped
db-1                | 
db-1                | PostgreSQL init process complete; ready for start up.
db-1                | 
db-1                | 2024-02-19 17:28:40.372 UTC [1] LOG:  starting PostgreSQL 16.2 (Debian 16.2-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
db-1                | 2024-02-19 17:28:40.372 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
db-1                | 2024-02-19 17:28:40.372 UTC [1] LOG:  listening on IPv6 address "::", port 5432
db-1                | 2024-02-19 17:28:40.372 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
db-1                | 2024-02-19 17:28:40.374 UTC [65] LOG:  database system was shut down at 2024-02-19 17:28:40 UTC
db-1                | 2024-02-19 17:28:40.377 UTC [1] LOG:  database system is ready to accept connections
nginx-1             | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1             | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1             | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1             | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1             | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1             | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1             | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1             | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1             | /docker-entrypoint.sh: Configuration complete; ready for start up
rinhadebackend-1    | info: Microsoft.Hosting.Lifetime[14]
rinhadebackend-1    |       Now listening on: http://[::]:8080
rinhadebackend-1    | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend-1    |       Application started. Press Ctrl+C to shut down.
rinhadebackend-1    | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend-1    |       Hosting environment: Production
rinhadebackend-1    | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend-1    |       Content root path: /app
rinhadebackend02-1  | info: Microsoft.Hosting.Lifetime[14]
rinhadebackend02-1  |       Now listening on: http://[::]:8080
rinhadebackend02-1  | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend02-1  |       Application started. Press Ctrl+C to shut down.
rinhadebackend02-1  | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend02-1  |       Hosting environment: Production
rinhadebackend02-1  | info: Microsoft.Hosting.Lifetime[0]
rinhadebackend02-1  |       Content root path: /app
db-1                | 2024-02-19 17:28:43.418 UTC [72] ERROR:  relation "Customers" does not exist at character 66
db-1                | 2024-02-19 17:28:43.418 UTC [72] STATEMENT:  SELECT c."Id", c."Balance", c."Limit", c."LastTransactions"
db-1                | 	FROM "Customers" AS c
db-1                | 	WHERE c."Id" = $1
db-1                | 	LIMIT 1
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Database.Command[20102]
rinhadebackend-1    |       Failed executing DbCommand (185ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
rinhadebackend-1    |       SELECT c."Id", c."Balance", c."Limit", c."LastTransactions"
rinhadebackend-1    |       FROM "Customers" AS c
rinhadebackend-1    |       WHERE c."Id" = @__id_0
rinhadebackend-1    |       LIMIT 1
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Query[10100]
rinhadebackend-1    |       An exception occurred while iterating over the results of a query for context type 'RinhaDeBackEnd.Infra.Contexts.AppDbContext'.
rinhadebackend-1    |       Npgsql.PostgresException (0x80004005): 42P01: relation "Customers" does not exist
rinhadebackend-1    |       
rinhadebackend-1    |       POSITION: 66
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
rinhadebackend-1    |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
rinhadebackend-1    |         Exception data:
rinhadebackend-1    |           Severity: ERROR
rinhadebackend-1    |           SqlState: 42P01
rinhadebackend-1    |           MessageText: relation "Customers" does not exist
rinhadebackend-1    |           Position: 66
rinhadebackend-1    |           File: parse_relation.c
rinhadebackend-1    |           Line: 1449
rinhadebackend-1    |           Routine: parserOpenTable
rinhadebackend-1    |       Npgsql.PostgresException (0x80004005): 42P01: relation "Customers" does not exist
rinhadebackend-1    |       
rinhadebackend-1    |       POSITION: 66
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
rinhadebackend-1    |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
rinhadebackend-1    |         Exception data:
rinhadebackend-1    |           Severity: ERROR
rinhadebackend-1    |           SqlState: 42P01
rinhadebackend-1    |           MessageText: relation "Customers" does not exist
rinhadebackend-1    |           Position: 66
rinhadebackend-1    |           File: parse_relation.c
rinhadebackend-1    |           Line: 1449
rinhadebackend-1    |           Routine: parserOpenTable
rinhadebackend-1    | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend-1    |       Connection id "0HN1HE0RO7K9K", Request id "0HN1HE0RO7K9K:00000001": An unhandled exception was thrown by the application.
rinhadebackend-1    |       Npgsql.PostgresException (0x80004005): 42P01: relation "Customers" does not exist
rinhadebackend-1    |       
rinhadebackend-1    |       POSITION: 66
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
rinhadebackend-1    |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
rinhadebackend-1    |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_1>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 88
rinhadebackend-1    |       --- End of stack trace from previous location ---
rinhadebackend-1    |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend-1    |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend-1    |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend-1    |         Exception data:
rinhadebackend-1    |           Severity: ERROR
rinhadebackend-1    |           SqlState: 42P01
rinhadebackend-1    |           MessageText: relation "Customers" does not exist
rinhadebackend-1    |           Position: 66
rinhadebackend-1    |           File: parse_relation.c
rinhadebackend-1    |           Line: 1449
rinhadebackend-1    |           Routine: parserOpenTable
db-1                | 2024-02-19 17:28:44.219 UTC [75] ERROR:  relation "__EFMigrationsHistory" already exists
db-1                | 2024-02-19 17:28:44.219 UTC [75] STATEMENT:  CREATE TABLE "__EFMigrationsHistory" (
db-1                | 	    "MigrationId" character varying(150) NOT NULL,
db-1                | 	    "ProductVersion" character varying(32) NOT NULL,
db-1                | 	    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
db-1                | 	)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Command[20102]
rinhadebackend02-1  |       Failed executing DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
rinhadebackend02-1  |       CREATE TABLE "__EFMigrationsHistory" (
rinhadebackend02-1  |           "MigrationId" character varying(150) NOT NULL,
rinhadebackend02-1  |           "ProductVersion" character varying(32) NOT NULL,
rinhadebackend02-1  |           CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
rinhadebackend02-1  |       );
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0E", Request id "0HN1HE0UIEH0E:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
db-1                | 2024-02-19 17:29:51.826 UTC [104] FATAL:  terminating connection due to unexpected postmaster exit
db-1                | 2024-02-19 17:29:51.829 UTC [120] FATAL:  terminating connection due to unexpected postmaster exit
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0C", Request id "0HN1HE0UIEH0C:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0F", Request id "0HN1HE0UIEH0F:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
db-1                | 2024-02-19 17:29:51.839 UTC [81] FATAL:  terminating connection due to unexpected postmaster exit
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0G", Request id "0HN1HE0UIEH0G:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
db-1                | 2024-02-19 17:29:51.922 UTC [121] FATAL:  terminating connection due to unexpected postmaster exit
db-1                | 2024-02-19 17:29:51.922 UTC [119] FATAL:  terminating connection due to unexpected postmaster exit
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0H", Request id "0HN1HE0UIEH0H:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
db-1                | 2024-02-19 17:29:51.924 UTC [108] FATAL:  terminating connection due to unexpected postmaster exit
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
db-1                | 2024-02-19 17:29:51.925 UTC [99] FATAL:  terminating connection due to unexpected postmaster exit
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0M", Request id "0HN1HE0UIEH0M:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0P", Request id "0HN1HE0UIEH0P:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend02-1  |       Connection id "0HN1HE0UIEH0Q", Request id "0HN1HE0UIEH0Q:00000001": An unhandled exception was thrown by the application.
rinhadebackend02-1  |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend02-1  |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend02-1  |          --- End of inner exception stack trace ---
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend02-1  |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend02-1  |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend02-1  |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend02-1  |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend02-1  |       --- End of stack trace from previous location ---
rinhadebackend02-1  |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend02-1  |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Database.Command[20102]
rinhadebackend-1    |       Failed executing DbCommand (1ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Int32), @p3='?', @p5='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
rinhadebackend-1    |       UPDATE "Customers" SET "Balance" = @p0, "LastTransactions" = @p1, "Limit" = @p2, "Name" = @p3
rinhadebackend-1    |       WHERE "Id" = @p4 AND xmin = @p5
rinhadebackend-1    |       RETURNING xmin;
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend-1    |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend-1    | fail: Microsoft.AspNetCore.Server.Kestrel[13]
rinhadebackend-1    |       Connection id "0HN1HE0RO7MCR", Request id "0HN1HE0RO7MCR:00000001": An unhandled exception was thrown by the application.
rinhadebackend-1    |       Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend-1    |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend-1    |        ---> System.Net.Sockets.SocketException (104): Connection reset by peer
rinhadebackend-1    |          --- End of inner exception stack trace ---
rinhadebackend-1    |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
rinhadebackend-1    |          at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend02-1  |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend02-1  | fail: Microsoft.EntityFrameworkCore.Query[10100]
rinhadebackend02-1  |       An exception occurred while iterating over the results of a query for context type 'RinhaDeBackEnd.Infra.Contexts.AppDbContext'.
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|54_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
rinhadebackend-1    |          at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
rinhadebackend-1    |          at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
rinhadebackend-1    |          at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
rinhadebackend-1    |          at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
rinhadebackend02-1  |       System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
rinhadebackend-1    |          at RinhaDeBackEnd.Endpoints.ClientEndpoint.<>c.<<MapClientEndpoint>b__0_0>d.MoveNext() in /src/RinhaDeBackEnd/Endpoints/ClientEndpoint.cs:line 30
rinhadebackend-1    |       --- End of stack trace from previous location ---
rinhadebackend-1    |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
rinhadebackend-1    |          at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
rinhadebackend-1    |       --- End of stack trace from previous location ---
rinhadebackend-1    |          at RinhaDeBackEnd.Domain.Middleware.JsonExceptionMiddleware.InvokeAsync(HttpContext context) in /src/RinhaDeBackEnd/Domain/Middleware/JsonExceptionMiddleware.cs:line 18
rinhadebackend-1    |          at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
rinhadebackend02-1  |        ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
rinhadebackend02-1  |        ---> System.IO.IOException: Unable to read data from the transport connection: Connection reset by peer.
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
rinhadebackend-1    |       An error occurred using the connection to database 'rinha' on server 'tcp://db:5432'.
rinhadebackend-1    | fail: Microsoft.EntityFrameworkCore.Update[10000]
rinhadebackend-1    |       An exception occurred in the database while saving changes for context type 'RinhaDeBackEnd.Infra.Contexts.AppDbContext'.
